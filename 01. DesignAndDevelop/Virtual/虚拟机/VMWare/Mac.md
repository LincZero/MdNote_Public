# Mac系统杂记

# 目录

[TOC]

# 安装踩坑

## 配置类

- 主板：MSI MPG X570

- CPU：AMD Ryzen 7，装黑苹果AMD安装出现的问题比Inter多

- 虚拟机：VMWare15.0（15.5不可，这里故意选用旧版）

- Mac系统：Mac OS 10.15

## VMWare问题

### # 需要开启虚拟化内存 / 不支持二进制

主板设置开启虚拟化，注意一下：AMD的BIOS面板里不叫 `Virtualization` ，而叫 `SMV` 。

### # 不支持降级安装

卸载重装，要卸载干净！用Total Uninstall或其他工具卸载

### VMWare破解问题

无注册机和破解方式，大多使用直接在网上搜密钥的方式

### VMWare版本问题

使用Unlock解锁器后，VMWare15.0最高到达Mac14.0版本，15.1以后才有Mac15.0与16.0版本。官网不支持旧版下载

但AMD装Mac15.0系统时，15.5正常使用，还是需要切换为旧版的15.0版本

## 虚拟机配置

- 内存：4G

- 硬盘：40G
- 处理器：1个4核

## VMWare for Mac问题

### 虚拟机与Mac的问题

需要使用Unlock解锁器，VM才能选择Mac系统。注意VM的版本问题

### 选择虚拟机系统

安装Mac15.0，配置时选择Mac14.0，但启动前要切换为 `其他系统 64位` （也有人切换成Windows10 64位），不然带动不了Mac15.0。

### # 客户机操作系统已禁用 CPU，请关闭或重置虚拟机

解决方法：修改 `macOS 10.15.vmx` 文件

末尾追加

```
smc.version = "0"
cpuid.0.eax = "0000:0000:0000:0000:0000:0000:0000:1011"
cpuid.0.ebx = "0111:0101:0110:1110:0110:0101:0100:0111"
cpuid.0.ecx = "0110:1100:0110:0101:0111:0100:0110:1110"
cpuid.0.edx = "0100:1001:0110:0101:0110:1110:0110:1001"
cpuid.1.eax = "0000:0000:0000:0001:0000:0110:0111:0001"
cpuid.1.ebx = "0000:0010:0000:0001:0000:1000:0000:0000"
cpuid.1.ecx = "1000:0010:1001:1000:0010:0010:0000:0011"
cpuid.1.edx = "0000:1111:1010:1011:1111:1011:1111:1111"
featureCompat.enable = "FALSE"
```

### # 这个虚拟机需要avx2，但是没有avx

解决方法：修改 `macOS 10.15.vmx` 文件

```
virtualHW.version = "16" // 修改前
virtualHW.version = "10" // 修改后
```

### 蓝 Boot Manager 界面

continue以后是unxxxx

解决方案：

虚拟机设置 > 选项 > 高级 > 固件类型，把`UEFI`改为`BIOS`

但还是有问题：

然后就变成了黑屏的`Operating System not found`

## Mac问题

### # 鼠键失灵

设置类

> 内存：虚拟化引擎不需要勾选选项
>
> USB控制器：兼容性调为USB2.0，显示所有USB输入设备和与虚拟机共享蓝牙设备勾选
>
> 常规：增强型键盘：选择“在可用时使用（推荐）”

解决方法：修改 `macOS 10.15.vmx` 文件

```
// gestOS = "freebsd-64" // 修改，不改也行
keyboard.vusb.enable = "TRUE" // 追加
mouse.vusb.enable = "TRUE" // 追加
```

### # 这个安装macOS应用程序副本已损坏

这个安装macOS应用程序副本已损坏，不能用来安装macOS

解决方法：

1. 断开Mac系统wifi或实体机wifi

2. 终端中输入：（意思为：10月25日10时20分2016年20秒）

```
date 1025102016.20
```

大概原理就是系统检测当前时间远大于安装包的时间时，就会禁止你安装。所以这里把时间改到以前的时间。

### # 安装重启后仍为实用工具界面

这里使用的是10.14版本

1. 把虚拟机上系统改回macOS 10.14版本

2. 重新抹掉磁盘（显示所有卷宗，选择最顶层的那个抹掉），抹掉格式改为APS
3. 然后重装系统就OK了，进入到地区选择面板，表示成功

## 正式安装

![image-20200729215701674](Mac.assets/image-20200729215701674.png)

### 选择语言

中文

### 使用工具，格式化磁盘

选择磁盘工具，显示一个磁盘映像，两个外置/内置磁盘

选择分配容量为50G的那个

![image-20200728175554903](Mac.assets/image-20200728175554903.png)

点击“抹掉”，并重命名，其他默认

![image-20200728175704657](Mac.assets/image-20200728175704657.png)

就会成为一个日志式磁盘

![image-20200728175900966](Mac.assets/image-20200728175900966.png)

然后叉掉就行

### 使用工具，安装MacOS

安装完毕后，出现选择地区界面为成功

### 地区与语言设置

一直点 `同意` 或 `继续` 即可

![image-20200802034446223](Mac.assets/image-20200802034446223.png)

![image-20200802034524600](Mac.assets/image-20200802034524600.png)

### 互联网连接

（也可后期配置连接）

实体机设置：

​	返回实体机 > Win + I，进入Windows设置 > 网络和Internet> 状态 > 网络和共享中心 > 点wifi名 > 属性 > 共享

​	勾选允许其他网络用户通过...... > 下拉栏选择 `VMware Network Adapter VMnet1 ` > 确定

虚拟机设置：

​	虚拟机设置 > 硬件 > 网络适配器 > NAT模式改为仅主机模式

![image-20201027080320809](Mac.assets/image-20201027080320809.png)

Mac系统设置：

​	配置完上面的设置后，直接点 `继续`

![image-20200802034750399](Mac.assets/image-20200802034750399.png)

![image-20200802034809380](Mac.assets/image-20200802034809380.png)

## 使用过程

### 全屏问题

安装VMWare Tools即可

### 联网问题

#### 实体机设置

​	返回实体机 > Win + I，进入Windows设置 > 网络和Internet> 状态 > 网络和共享中心 > 点wifi名 > 属性 > 共享

​	勾选允许其他网络用户通过...... > 下拉栏选择 `VMware Network Adapter VMnet1 ` > 确定

![image-20200802062602226](Mac.assets/image-20200802062602226.png)

打开任务管理器的服务，确保`VMWare NAT Service`与`VMnetDHCP`打开，若无打开则手动打开

![image-20200802062238287](Mac.assets/image-20200802062238287.png)

#### 虚拟机设置

虚拟机设置 > 硬件 > 网络适配器 > NAT模式改为仅主机模式（不行 / 以太网连接了但无法上网就改回NAT）

也可虚拟机菜单 > 编辑 > 虚拟网络编辑器，进行检查

![image-20200802063028486](Mac.assets/image-20200802063028486.png)

#### 最后检查

![image-20200802062415106](Mac.assets/image-20200802062415106.png)

有绿色小点则为成功

![image-20200802062442732](Mac.assets/image-20200802062442732.png)























