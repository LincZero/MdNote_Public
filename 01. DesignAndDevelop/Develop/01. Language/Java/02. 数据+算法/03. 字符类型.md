# Java

# ç›®å½•

# å­—ç¬¦ç±»å‹

## Stringç±»ï¼ˆå­—ç¬¦ä¸²ï¼‰

API: `java.lang.String 1.0`ï¼ˆåŒ…å«äº†50å¤šä¸ªæ–¹æ³•ï¼‰

### åŸç†ç±»

#### ç®€æ¦‚

ä»æ¦‚å¿µä¸Šè®²ï¼ŒJavaå­—ç¬¦ä¸²å°±æ˜¯Unicodeå­—ç¬¦åºåˆ—

Java**æ²¡æœ‰å†…ç½®çš„å­—ç¬¦ä¸²ç±»å‹**ï¼Œè€Œæ˜¯åœ¨æ ‡å‡†Javaç±»åº“ä¸­æä¾›äº†ä¸€ä¸ªé¢„å®šä¹‰ç±»ï¼Œå¾ˆè‡ªç„¶åœ°å«åšString

ï¼ˆPythonæœ‰ä½†ç”¨èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼ˆå­˜å‚¨å­—ç¬¦ä¸²çš„å˜é‡å¯å˜ï¼Œå­—ç¬¦ä¸²å…ƒç´ ä¸å¯å˜ï¼Œä¸ºåŒºåˆ«äºå¸¸é‡å…¶æ›´è´´åˆ‡çš„è¯´æ³•æ˜¯`å…ƒç´ ä¸å¯å˜æ€§`ï¼‰ï¼Œè¿™æœ‰ç‚¹ä¸åƒæ•°ç»„ï¼‰

```java
String e = "";				// an empty string
String greeting = "Hello";
```

#### ä¸å¯å˜å­—ç¬¦ä¸²

å’ŒPythonå­—ç¬¦ä¸²ä¸€æ ·ï¼ŒJavaçš„Stringç±»å­—ç¬¦ä¸²ä¹Ÿæ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚Stringç±»æ²¡æœ‰æä¾›ç”¨äºä¿®æ”¹å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚
å¦‚æœå¸Œæœ›å°†greetingï¼ˆâ€œHelloâ€ï¼‰çš„å†…å®¹ä¿®æ”¹ä¸ºâ€œHelpï¼â€ï¼Œä¸èƒ½ç›´æ¥åœ°å°†greetingçš„æœ€åä¸¤ä¸ªä½ç½®çš„å­—ç¬¦ä¿®æ”¹ä¸ºâ€˜pâ€™å’Œâ€˜ï¼â€™ã€‚
è¿™å¯¹äºCç¨‹åºå‘˜æ¥è¯´ï¼Œå°†ä¼šæ„Ÿåˆ°æ— ä»ä¸‹æ‰‹ã€‚

##### æŠ€å·§ï¼ˆæ‹¼æ¥ï¼‰

åœ¨Javaä¸­å®ç°è¿™é¡¹æ“ä½œéå¸¸å®¹æ˜“ã€‚é¦–å…ˆæå–éœ€è¦çš„å­—ç¬¦ï¼Œç„¶åå†æ‹¼æ¥ä¸Šæ›¿æ¢çš„å­—ç¬¦ä¸²ï¼š

```java
greeting = greeting.substring(0,3) + "p!";	// Help!
```

##### åº•å±‚åŸç†

- åŸç†ï¼šå¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²å˜é‡greetingï¼Œè®©å®ƒå¼•ç”¨å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™å°±å¦‚åŒå¯ä»¥å°†å­˜æ”¾3çš„æ•°å€¼å˜é‡æ”¹æˆå­˜æ”¾4ä¸€æ ·ã€‚

- æ•ˆç‡ï¼šè¿™æ ·åšæ˜¯å¦ä¼šé™ä½è¿è¡Œæ•ˆç‡å‘¢ï¼Ÿçœ‹èµ·æ¥å¥½åƒä¿®æ”¹ä¸€ä¸ªä»£ç å•å…ƒè¦æ¯”åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²æ›´åŠ ç®€æ´ã€‚

  ç­”æ¡ˆæ˜¯ï¼šä¹Ÿå¯¹ï¼Œä¹Ÿä¸å¯¹ã€‚çš„ç¡®ï¼Œé€šè¿‡æ‹¼æ¥â€œHelâ€å’Œâ€œpï¼â€æ¥åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²çš„æ•ˆç‡ç¡®å®ä¸é«˜ã€‚

  ä½†æ˜¯ï¼Œ**ä¸å¯å˜å­—ç¬¦ä¸²å´æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼šç¼–è¯‘å™¨å¯ä»¥è®©å­—ç¬¦ä¸²å…±äº«**ã€‚

  æ€»è€Œè¨€ä¹‹ï¼ŒJavaçš„è®¾è®¡è€…è®¤ä¸ºå…±äº«å¸¦æ¥çš„é«˜æ•ˆç‡è¿œè¿œèƒœè¿‡äºæå–ã€æ‹¼æ¥å­—ç¬¦ä¸²æ‰€å¸¦æ¥çš„ä½æ•ˆç‡ã€‚æŸ¥çœ‹ä¸€ä¸‹ç¨‹åºä¼šå‘ç°ï¼šå¾ˆå°‘éœ€è¦ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å¾€å¾€éœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ

#### é•¿åº¦ lengthå’ŒcodePointCount

é•¿åº¦ï¼Œlength å’Œ codePointCount

```java
String s = "\uD835\uDD46 is the set of octonions";
// å…¶ä¸­\uD835\uDD46ä¹Ÿå¯å†™ä½œU+1D546æˆ–ğ•†ï¼Œæ˜¯ä¸€ä¸ªå…«å…ƒæ•°çš„æ•°å­¦ç¬¦å·ï¼Œéœ€è¦ä¸¤ä¸ªä»£ç å•å…ƒ
int n = s.length();								// è¿”å›`ä»£ç å•å…ƒçš„æ•°é‡`ï¼ˆé‡‡ç”¨UTF-16ç¼–ç è¡¨ç¤ºçš„ç»™å®šå­—ç¬¦ä¸²ï¼‰
// is 26ï¼Œ  \uD835\uDD46ä¸º2
int n = s.codePointCount(0, s.length());		// è¿”å›`ç ç‚¹çš„æ•°é‡`ï¼ˆå®é™…é•¿åº¦ï¼‰
// is 25ï¼Œ  \uD835\uDD46ä¸º1
```

~~ç ç‚¹å’Œä»£ç å•å…ƒï¼ˆé™¤éå¯¹åº•å±‚çš„ä»£ç å•å…ƒæ„Ÿå…´è¶£ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨ï¼‰~~

```java
char first = s.charAt(1);				// å°†è¿”å›ä½ç½®nçš„ä»£ç å•å…ƒï¼ˆç›¸å½“äºå–æ•°ç»„ï¼‰
//  è°ƒç”¨s.charAt(1);è¿”å›çš„ä¸æ˜¯è¯¥å­—ç¬¦çš„åä¸€ä¸ªå­—ç¬¦ï¼Œè€Œæ˜¯ç¬¬äºŒä¸ªä»£ç å•å…ƒã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä¸è¦ä½¿ç”¨charç±»å‹ã€‚
```

ç ç‚¹éå†

```java
// é¡ºåºéå†
int cp = sentence.codePointAt(i);
if(Character.isSupplementaryCodePoint(cp)) i+=2;
else i++;

// æˆ–è€…å›é€€
i--;
if(Character.isSurrogate(sentence.charAt(i))) i--;
int cp = sentence.codePointAt(i);

// æ›´å®¹æ˜“çš„åŠæ³•æ˜¯ä½¿ç”¨codePointsæ–¹æ³•ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªintå€¼çš„â€œæµâ€ï¼Œæ¯ä¸ªintå€¼å¯¹åº”ä¸€ä¸ªç ç‚¹ã€‚
int[] codePoints = str.codePoints().toArray();
// åä¹‹ï¼Œè¦æŠŠä¸€ä¸ªç ç‚¹æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°
String str = new String(codePoint, 0, codePoints.length);
```

### String å¸¸ç”¨ API

#### æ‹¼æ¥  +

```java
String expletive = "Expletive";
String PG13 = "deleted";
String message = expletive + PG13;

// è¿˜å¯ä»¥æ‹¼æ¥æ•°å€¼ç±»å‹
String message = "age:" + 13;
```

#### å­ä¸²  substring

æœ‰ç‚¹ç±»ä¼¼äºPythonä¸­çš„åˆ‡ç‰‡æ“ä½œï¼Œä¸è¿‡Pythonçš„æ“ä½œæ›´å­—é¢é‡äº›

```java
String greeting = "Hello";
String s = greeting.substring(0,3);	// â€œHel"
```

#### join

å¤šä¸ªå­—ç¬¦ä¸²æ”¾åœ¨ä¸€èµ·ï¼Œç”¨ä¸€ä¸ªå®šç•Œç¬¦åˆ†éš”

```java
String s_all = String.join(" / ", "S", "M", "L", "XL");
// s_all is "S / M / L / XL"
```

#### æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ equals

```java
s.equals(t);						// è¿”å›å¸ƒå°”ï¼ŒåŒºåˆ†å¤§å°å†™
"Hello".equal(greeting);			// å¯ä»¥ä½¿ç”¨å­—é¢é‡
"Hello".equalsIgnoreCase("hello");	// ä¸åŒºåˆ†å¤§å°å†™
// ä¸€å®šä¸è¦ä½¿ç”¨==è¿ç®—ç¬¦æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼è¿™ä¸ªè¿ç®—ç¬¦åªèƒ½å¤Ÿç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ”¾ç½®åœ¨åŒä¸€ä¸ªä½ç½®ä¸Š
// è¿™ç‚¹å’ŒC/C++ä¸€æ ·ï¼Œå› ä¸ºJavaStringæœ¬è´¨ä¸Šæ˜¯æŒ‡é’ˆ
greeting.compareTo("Hello")==0;		// æ›´ç±»ä¼¼äºC strcmpçš„å‡½æ•°
```

#### ç©ºä¸²ä¸Nullä¸²

æ£€æŸ¥æ–¹æ³•

```java
// ç©ºä¸²
if(str.length()==0);
if(str.equals(""));

// Nullä¸²
// Stringå˜é‡è¿˜å¯ä»¥å­˜æ”¾ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œåä¸ºnullï¼Œè¿™è¡¨ç¤ºç›®å‰æ²¡æœ‰ä»»ä½•å¯¹è±¡ä¸è¯¥å˜é‡å…³è”
if(str==null);
if(str!=null && str.length()!=0);

// å³ä¸æ˜¯ç©ºä¸²åˆä¸æ˜¯nullï¼Œåˆ™ç”¨&&æ¥æ£€æµ‹
```

### String API

```java
// å…¶ä»–
char charAt(int index);											// è¿”å›ç»™å®šä½ç½®çš„ä»£ç å•å…ƒï¼ˆé™¤éå¯¹åº•å±‚çš„ä»£ç å•å…ƒæ„Ÿå…´è¶£ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨ï¼‰
int codePointAt(int index);										// è¿”å›ä»ç»™å®šä½ç½®å¼€å§‹çš„ç ç‚¹
int offsetByCodePoints(int startIndex, int cpCount);			// è¿”å›ä»startIndexå¼€å§‹ï¼ŒcpCountä¸ªç æ•°
int compareTo(String other);									// æŒ‰å­—å…¸é¡ºåºï¼Œçœ‹å­—ç¬¦ä¸²è‹¥ä½äºotherå‰åˆ™è´Ÿæ•°ï¼Œä¹‹åæ­£æ•°ï¼Œç›¸ç­‰ä¸º0
IntStream codePoints();											// å°†å­—ç¬¦ä¸²ç ç‚¹ä½œä¸ºä¸€ä¸ªæµè¿”å›ï¼Œè°ƒç”¨toArrayå°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­
new String(int[] codePoints, int offset, int count);			// offsetå¼€å§‹çš„countä¸ªç ç‚¹æ„é€ ä¸€ä¸ªæ–°å­—ç¬¦ä¸²

// å¸ƒå°”ç±»
boolean empty();												// æ˜¯å¦ä¸ºç©º
boolean blank();												// æ˜¯å¦ä¸ºç©ºæˆ–ç”±ç©ºæ ¼ç»„æˆ
boolean equals(Object other);									// ä¸¤å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œä¸å¿½ç•¥/å¿½ç•¥å¤§å°å†™
boolean equalsIgnoreCase(String other);							//
boolean startsWith(String prefix);								// å‰ç¼€/åç¼€
boolean endWith(String suffix);									//

// åºåˆ—/ä¸ªæ•°ç±»
int indexOf(String str);										// ä»cpå¼€å§‹ï¼Œè¿”å›åŒ¹é…åˆ°çš„åºåˆ—ï¼Œä¸å­˜åœ¨åˆ™è¿”å›-1
int indexOf(int cp);											//
int indexOf(int cp, int fromIndex);								//
int lastIndexOf(String str);									// ä»æœ€åå¼€å§‹åŒ¹é…
int lastIndexOf(String str, int fromIndex);						//
int lastindexOf(int cp);										//
int lastindexOf(int cp, int fromIndex);							//
int length();													// è¿”å›å­—ç¬¦ä¸²ä»£ç å•å…ƒçš„ä¸ªæ•°
int codePointCount(int startIndex, int endIndex);				// è¿”å›å­—ç¬¦ä¸²ç‰‡æ®µä¸­ç ç‚¹çš„ä¸ªæ•°

// è¿”å›æ–°å­—ç¬¦ä¸²ç³»åˆ—
String replace(CharSequence oldString, CharSequence newString);	// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œç”¨newStringæ›¿æ¢oldString
String substring(int beginIndex);								// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œå­ä¸²
String substring(int beginIndex, int endIndex);					//
String toLowerCase();											// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œå…¨å°å†™/å…¨å°å†™
String toUpperCase();											//
String trim();
String strip();													// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œåˆ é™¤å¤´å°¾ç©ºæ ¼æˆ–ç©ºç™½
String join(CHarSequence delimiter, CharSequence... elements);	// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œç”¨ç»™å®šçš„å®šç•Œç¬¦è¿æ¥æ‰€æœ‰å…ƒç´ 
String repeat(int count);										// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œå°†å½“å‰å­—ç¬¦ä¸²é‡å¤countæ¬¡
```

## StringBuilderç±»ï¼ˆæ„å»ºå­—ç¬¦ä¸²ç±»ï¼‰

API: `java.lang.StringBuilder 5.0`

### æ„é€ 

æœ‰äº›æ—¶å€™ï¼Œéœ€è¦ç”±è¾ƒçŸ­çš„å­—ç¬¦ä¸²æ„å»ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒæŒ‰é”®æˆ–æ¥è‡ªæ–‡ä»¶ä¸­çš„å•è¯ã€‚é‡‡ç”¨å­—ç¬¦ä¸²è¿æ¥çš„æ–¹å¼è¾¾åˆ°æ­¤ç›®çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚

æ¯æ¬¡è¿æ¥å­—ç¬¦ä¸²ï¼Œéƒ½ä¼šæ„å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ï¼Œ**æ—¢è€—æ—¶ï¼Œåˆæµªè´¹ç©ºé—´**ã€‚ä½¿ç”¨StringBuilderç±»å°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜çš„å‘ç”Ÿã€‚

```java
StringBuilder builder = new StringBuilder();
```

å½“æ¯æ¬¡éœ€è¦æ·»åŠ ä¸€éƒ¨åˆ†å†…å®¹æ—¶ï¼Œå°±è°ƒç”¨appendæ–¹æ³•

```java
builder.append(ch);		// æ·»åŠ å•ä¸ªå­—ç¬¦
builder.append(str);	// è¿½åŠ å­—ç¬¦ä¸²
```

### ç±»å‹è½¬æ¢

åœ¨éœ€è¦æ„å»ºå­—ç¬¦ä¸²æ—¶å°±è°ƒç”¨toStringæ–¹æ³•ï¼Œå°†å¯ä»¥å¾—åˆ°ä¸€ä¸ªStringå¯¹è±¡

```java
String completedString = builder.toString();
```





















