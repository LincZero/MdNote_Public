# QT

# ç›®å½•

# æ¯”è¾ƒ - æ•°ç§UIæµ

æ•°ç§UIå¼€å‘æµï¼Œåˆ†åˆ«æ˜¯

- widgetã€widgetçš„å¯è§†åŒ– â€”â€” uiï¼ˆqt designerï¼‰
- qmlã€qmlçš„å¯è§†åŒ– â€”â€” qmlè®¾è®¡å™¨ï¼Ÿ
- ï¼ˆç”»å¸ƒã€æµè§ˆå™¨ è¿™ç§ï¼‰

è¿™é‡Œæ˜¯æŒ‡å·¥ä½œæµï¼Œå¼€å‘ä¸Šçš„æµç¨‹ä¸åŒã€‚

äº‹å®ä¸Šuiå’Œwidgetæ›´ç›¸ä¼¼ï¼Œuiæ–‡ä»¶å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ç®€åŒ–çš„widgetï¼ˆuiç¼–è¯‘åå…¶å®å°±æ˜¯cppæ–‡ä»¶ï¼‰ã€‚
æˆ‘ä¸ªäººå€¾å‘äºè®¤ä¸ºuiæ˜¯widgetçš„ä¸€ç§ç±»ä¼¼ â€œè¶…é›†â€ çš„å…³ç³»ï¼ˆå®é™…ä¸æ˜¯ï¼‰ï¼Œä¼šæ›´å¥½ç†è§£



## æ¯”è¾ƒä¸€è§ˆ

Qt Widgets Application && Qt Quick Application

| æµ                     | å¯é€‰çš„é™„åŠ å·¥å…·                     | æ ¸å¿ƒ                                                         | å¼€å‘çš„äº§å“                                                   |
| ---------------------- | ---------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Qt Widgets Application | .ui (å¯é€‰)<br />qt designer        | .pro `QT += core gui (widgets)`<br />main.cpp `#include`åŒ…å«å„ç§å¤´æ–‡ä»¶ï¼Œä½¿ç”¨QWidgetå¯¹è±¡<br />main.cpp ä½¿ç”¨ `<QApplication>` åº“ | @çš®å¡ä¸˜ä¸çš® Qtç‰ˆçš„ä»¿ç½‘æ˜“äº‘<br />@SilverFox PyQtç‰ˆçš„ä»¿ç½‘æ˜“äº‘  |
| Qt Quick Application   | .qml (å¿…é€‰)<br />qt quick designer | .pro `QT += quick (qml)`<br />.qml `import QtQuick 2.0`å¯¼å…¥åº“ä½¿ç”¨å„ç§QQuickå¯¹è±¡<br />main.cpp ä½¿ç”¨ `<QQmlApplicationEngine>` åº“ | å¾ˆå¤šéƒ½æ˜¯Qtå·¥å…·ï¼š<br />Qt Creator<br />Qt Designe Studio<br />QML Debugger<br />Profiler (Timelineç­‰)<br />ä¼˜ç§€Exampleï¼š<br />Qt Quick Controlsï¼šmusicplayer<br />Qt Quick Controlsï¼šautomotive |

åœ¨ä½¿ç”¨ Qt Widgets Application æ—¶ï¼Œä¼šæ¨èä½¿ç”¨.uié™„åŠ æ–‡ä»¶ï¼Œæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ UIä¸é€»è¾‘ åˆ†ç¦»



Qt Widget Applicationåˆæœ‰å¤šç§ä¸åŒç»„ä»¶

- QWidgetç³»åˆ—ï¼Œå¸¸ç”¨æ§ä»¶å¦‚ QWidgetã€QPushButtonã€QFlame ç­‰ã€QWebEngineView ä¹Ÿå±äºè¿™ç±»
- QGraphicsç³»åˆ—ï¼Œ å¸¸ç”¨æ§ä»¶å¦‚ QGraphicsSceneã€QGraphicsItem ã€~~QGraphicsView (è¿™ä¸ªæ˜¯QWidget)~~ ç­‰ã€‚å¼€å‘äº§å“å¦‚NodeEditor

Qt Quick Application

- å®é™…ä¼šç¼–è¯‘æˆ QQuickå¯¹è±¡ï¼Œå¦‚ QQuickRectangle (Rectangle)ã€ QQuickText (Text)ã€QQuickMouseArea (MouseArea) ç­‰
  ä½†æ˜¯è¿™äº›ç±»ä¸€èˆ¬ä¸æ‰‹åŠ¨æ“ä½œï¼Œ**ä½ å»æŸ¥æ–‡æ¡£ä¹ŸæŸ¥ä¸åˆ°è¿™äº›ç±»**



## æ¯”è¾ƒ Qt Quick App & Qt Widgets App

### åŠŸèƒ½æ¯”è¾ƒ

- å‚è€ƒ
  - [ã€CSDNã€‘QT Widgetså’ŒQMLåŒºåˆ«](https://blog.csdn.net/u011086209/article/details/92826108)
  - https://www.youtube.com/watch?v=FzyvziQf4JQ



| ==ä¸åŒç‚¹== | Qt Widget                                        | Qt Quick                                                     |
| ---------- | ------------------------------------------------ | ------------------------------------------------------------ |
|            | é€‚åˆä¼ ç»Ÿçš„æ¡Œé¢ç¨‹åºå¼€å‘                           | Qt 4.7 ä¸»æ¨çš„æŠ€æœ¯                                            |
| æ–°æ—§ç¨‹åº¦   | **æ›´â€œè€â€ã€æ›´æˆç†Ÿ**                               | **æ›´â€œæ–°â€ã€æ›´â€œç°ä»£â€**                                         |
| æ¡Œé¢å¼€å‘   | **ä¼ ç»Ÿçš„æ¡Œé¢ç¨‹åºæ¥è¯´ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ Qt Widgets**  | **æ›´â€œç°ä»£â€çš„ UI ä¸é«˜çº§åº”ç”¨**ï¼Œå»ºè®®ä½¿ç”¨ Qt5.x + QML 2.x + QtQuick 2.x |
| ç§»åŠ¨å¼€å‘   | ä¸å»ºè®®ä½¿ç”¨ Qt Widgetsï¼Œå…¶æ˜¾ç¤ºæ•ˆæœã€é€‚åº”æ€§éƒ½ä¸å¥½  | **å»ºè®®ä½¿ç”¨ QML**ã€‚ååŒ JavaScriptï¼Œç®€å•å¿«æ·ã€æ¸²æŸ“æ•ˆæœæ›´ä½³ã€ç•Œé¢æ›´ç‚«é…· |
| æ‹–æ‹½       | Widgetsè¦ä½¿ç”¨Dragå¯¹è±¡                            | **æ›´ç®€å•å¿«æ·**ã€‚åœ¨MouseAreaå¯¹è±¡ä¸­è®¾ç½®drag.targetå±æ€§å³å¯     |
| äº¤äº’ä»£ç    | C++                                              | **é™¤äº†C++ï¼Œè¿˜èƒ½åµŒå…¥JavaScript**                              |
| ä½¿ç”¨å…ƒç´    | Widgetså¯¹è±¡ï¼Œä¾‹å¦‚QWidgetã€QPushButtonã€QFlame ç­‰ | QQuickå¯¹è±¡ï¼Œä¾‹å¦‚QQuickRectangle (Rectangle)ã€ QQuickText (Text)ã€<br />QQuickMouseArea (MouseArea) ç­‰ |
| 2D         | â€”â€”                                               | å¯èƒ½æ›´æ–¹ä¾¿ï¼Ÿ                                                 |
| 3D         | â€”â€”                                               | **æ›´æ–¹ä¾¿**ã€‚å¯ä»¥ä½¿ç”¨Quick 3Dï¼Œæœ‰ç›¸åº”çš„3Dç»„å»º                 |
| çª—å£è‡ªé€‚åº” | **å¥½**                                           | ä¸å¥½ï¼ˆä½ å¯ä»¥æŠŠä»–ç†è§£æˆæ¸¸æˆï¼Œæ¸¸æˆä¸€èˆ¬éƒ½åªç»™å‡ ä¸ªå›ºå®šåˆ†è¾¨ç‡ä½ é€‰ï¼‰ |
| ==ç›¸åŒç‚¹== |                                                  |                                                              |
| è·¨å¹³å°     | ğŸŸ©                                                | ğŸŸ©                                                            |



å…¶ä»–è¡¥å……

`text: qsTr("hello")`ä¸­çš„`qsTr`å’ŒWidgetsä¸­çš„`Tr`æ•ˆæœåº”è¯¥æ˜¯ç±»ä¼¼çš„



### åˆå§‹é¡¹ç›®åŒ…å«æ–‡ä»¶

ï¼ˆQt Quick App ä¸æ„§æ˜¯å¿«é€Ÿå¼€å‘ï¼ŒçœŸçš„å¾ˆç®€æ´ï¼‰

| Qt Quick Application åˆå§‹é¡¹ç›®                             | Qt Widgets Application åˆå§‹é¡¹ç›®                              |
| --------------------------------------------------------- | ------------------------------------------------------------ |
| - QtQuickTest.pro<br />- main.cpp<br />- qml.qrc/main.qml | - QtWidgetTest.pro<br />- mainwindow.h<br />- main.cpp<br />- mainwindow.cpp<br />- mainwindow.ui (å¯é€‰) |



### åˆå§‹é¡¹ç›®æ–‡ä»¶å†…å®¹ - .pro

ï¼ˆç›¸åŒçš„åœ°æ–¹æˆ‘åˆ æ‰äº†ï¼‰

Qt Quick Application

```properties
QT += quick

CONFIG += c++11

SOURCES += \
        main.cpp

RESOURCES += qml.qrc

# Additional import path used to resolve QML modules in Qt Creator's code model
QML_IMPORT_PATH =

# Additional import path used to resolve QML modules just for Qt Quick Designer
QML_DESIGNER_IMPORT_PATH =

â€¦â€¦
```

Qt Widgets Application

```properties
QT       += core gui
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

CONFIG += c++11

SOURCES += \
    main.cpp \
    mainwindow.cpp

HEADERS += \
    mainwindow.h

FORMS += \
    mainwindow.ui

â€¦â€¦
```



### åˆå§‹é¡¹ç›®æ–‡ä»¶å†…å®¹ - main.cpp

Qt Quick Application

```c++
#include <QGuiApplication>
#include <QQmlApplicationEngine>

int main(int argc, char *argv[])
{
#if QT_VERSION < QT_VERSION_CHECK(6, 0, 0)
    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);
#endif

    QGuiApplication app(argc, argv);

    QQmlApplicationEngine engine;
    const QUrl url(QStringLiteral("qrc:/main.qml"));
    QObject::connect(&engine, &QQmlApplicationEngine::objectCreated,
                     &app, [url](QObject *obj, const QUrl &objUrl) {
        if (!obj && url == objUrl)
            QCoreApplication::exit(-1);
    }, Qt::QueuedConnection);
    engine.load(url);

    return app.exec();
}

```

Qt Widgets Application

```c++
#include "mainwindow.h"

#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
}

```



## æ¯”è¾ƒ .qml & .ui



|                      | .qml                      | .ui             |
| -------------------- | ------------------------- | --------------- |
| è¯­æ³•                 | æ›´ç±»ä¼¼äºjson / pythonå­—å…¸ | æ›´ç±»ä¼¼äºxml     |
| å¯è¯»æ€§               | **å¥½**                    | è¾ƒå·®            |
| ç•Œé¢å¯æ–‡æœ¬ç¼–è¾‘       | ğŸŸ©å¯ä»¥ç›´æ¥ç¼–è¾‘             | ğŸŸ¥ä¸å¯ä»¥ç›´æ¥ç¼–è¾‘ |
| ç•Œé¢å¯è§†åŒ–ç¼–è¾‘       | ğŸŸ©ä½“éªŒè¾ƒå¥½                 | ğŸŸ©ä½“éªŒè¾ƒå¥½       |
| äº¤äº’é€»è¾‘çš„å¯è§†åŒ–ç¼–è¾‘ |                           |                 |



ç›¸åŒç‚¹

- ==æœ¬è´¨ä¸Šéƒ½æ˜¯è§£æå¹¶ç”ŸæˆC++å¯¹è±¡==
  - QMLå¼•æ“åœ¨åŠ è½½QMLæ–‡ä»¶æ—¶ï¼Œä¼šä¸ºæ–‡ä»¶ä¸­çš„æ‰€æœ‰å…ƒç´ ä»¥æŸç§æ–¹å¼åˆ›å»ºç›¸åº”çš„C++å¯¹è±¡
  - UIæ–‡ä»¶è¢«æ„å»ºåï¼Œä¼šç”Ÿæˆ.hæ–‡ä»¶ï¼ŒUIæ–‡ä»¶ä¸­çš„ç©ºé—´ä¼šè¢«åˆ›å»ºä¸ºç›¸åº”çš„C++å¯¹è±¡



## æ¯”è¾ƒ QMLå¼•æ“ & V8å¼•æ“

V8ç¼–è¯‘æµæ°´çº¿

![img](æ•°ç§UIæµ.assets/02177e62822fe5164012e9e980583feb.png)



# è·¨é¢†åŸŸå¯¹æ¯”

å‰é¢çš„æ˜¯Qtä¸‹å„ç§å·¥å…·çš„å¯¹æ¯”ï¼Œé‚£ä¹ˆå¦‚æœåŒ…æ‹¬Qtä»¥å¤–çš„å·¥å…·å‘¢ï¼ŒåƒHTMLè¿™ç§

## æ¯”è¾ƒ QML & HTML+CSS

QMLä¼˜ç‚¹ï¼š

- QMLçš„å¯è¯»æ€§æ›´å¥½ï¼Œä»–æ›´ç±»ä¼¼äºHTMLå’ŒCSSçš„ç»“åˆ
- QMLèƒ½é€šè¿‡idç­›é€‰ä½¿ç”¨å…¶ä»–å…ƒç´ çš„å±æ€§è¿™ç‚¹å¾ˆæ–¹ä¾¿
- å¥—å¨ƒæ–¹ä¾¿ã€ç»„ä»¶æ–¹ä¾¿ï¼ŒHTMLè¦é€šè¿‡Vueç­‰æ¡†æ¶æ‰èƒ½å®ç°è¿™ä¸€ç‚¹

HTML+CSSä¼˜ç‚¹ï¼š

- HTML å†…å®¹ä¸æ ·å¼åˆ†ç¦»ï¼Œç•Œé¢ä¸é€»è¾‘åˆ†ç¦»
- CSSæ ·å¼æ›´ä¸°å¯Œ

















































