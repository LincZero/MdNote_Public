# Qt

# 目录

# .lib.a 静态库

可另参考另一篇笔记：**Dev > Tools > 辅助文件 > 动态库和静态库**

参考：

- [【CSDN】关于Qt编译库（0）：静态库与动态库的区别](https://blog.csdn.net/sksukai/article/details/105314425)

## 区别（动态库与静态库）

### 本质区别

库有两种：静态库（.a、.lib）和动态库（.so、.dll），所谓静态、动态是指链接

![在这里插入图片描述](06.2 .lib.a 静态库.assets/20200404181519275.png)

- 静态库
  - 在链接阶段，会将汇编生成的目标文件.o与引用到的库一起链接打包到可执行文件中。因此对应的链接方式称为静态链接
  - Linux下使用ar工具、Windows下vs使用lib.exe，将目标文件压缩到一起，并且对其进行编号和索引，以便于查找和检索
- 动态库
  - 与创建静态库不同的是，不需要打包工具（ar、lib.exe），直接使用编译器即可创建动态库
- 补充
  - Window与Linux执行文件格式不同，在创建动态库的时候有一些差异。
  - 在Windows系统下的执行文件格式是PE格式，动态库需要一个DllMain函数做出初始化的入口，通常在导出函数的声明时需要有_declspec(dllexport)关键字。
  - Linux下gcc编译的执行文件默认是ELF格式，不需要初始化入口，亦不需要函数做特别的声明，编写比较方便

### 特点区别（优缺点比较）

- 静态库
  - 静态库对函数库的链接是放在编译时期完成的
  - 程序在运行时与函数库再无瓜葛，移植方便
  - 缺点：**浪费空间和资源**，因为所有相关的目标文件与牵涉到的函数库被链接合成一个可执行文件
  - ![在这里插入图片描述](06.2 .lib.a 静态库.assets/20200404181756800.png)
- 动态库
  - 动态库把对一些库函数的链接载入推迟到程序运行的时期
  - 可以实现进程之间的资源共享。（因此动态库也称为共享库）
  - 将一些程序**升级变得简单**
  - 甚至可以真正做到链接载入完全由程序员在程序代码中控制（显示调用）
  - ![在这里插入图片描述](06.2 .lib.a 静态库.assets/20200404181824756.png)

### 选用

详见下节

## 创建

和.dll动态库的创建相类似，详见.dll一章

略

## 使用

略